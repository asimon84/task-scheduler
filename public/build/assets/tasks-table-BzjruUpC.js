$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('input[name="_token"]').val()}});new DataTable("#tasksTable",{processing:!0,serverSide:!0,ajax:window.route,columns:[{data:"id",name:"id",searchable:!0},{data:"name",name:"name",searchable:!0},{data:"description",name:"description",className:"truncate-text",searchable:!0},{data:"actions",name:"actions",orderable:!1,searchable:!1}]});new bootstrap.Modal(document.getElementById("taskModal"));$.callCreateModal=function(){var t=$("#task-modal-id"),a=$("#task-modal-name"),e=$("#task-modal-description");a.prop("disabled",!1),e.prop("disabled",!1),t.val(""),a.val(""),e.val(""),$("#taskModal").modal("show")};$.callModal=function(t,a){var e=$("#task-modal-id"),d=$("#task-modal-name"),l=$("#task-modal-description");d.prop("disabled",a),l.prop("disabled",a),e.val(""),d.val(""),l.val(""),$.ajax({url:"/task/"+t,type:"GET",dataType:"json",success:function(o){e.val(o.id),d.val(o.name),l.val(o.description)},error:function(o,r,n){console.error("AJAX error:",r,n)}})};$.createRecord=function(){$.ajax({url:"/task/"+$("#task-modal-id").val(),type:"POST",dataType:"json",data:{name:$("#task-modal-name").val(),description:$("#task-modal-description").val()},success:function(t){$("#taskModal").modal("hide"),$("#tasksTable").DataTable().draw()},error:function(t,a,e){console.error("AJAX error:",a,e)}})};$.editRecord=function(){$.ajax({url:"/task/"+$("#task-modal-id").val(),type:"PUT",dataType:"json",data:{name:$("#task-modal-name").val(),description:$("#task-modal-description").val()},success:function(t){$("#taskModal").modal("hide"),$("#tasksTable").DataTable().draw()},error:function(t,a,e){console.error("AJAX error:",a,e)}})};$.deleteRecord=function(t,a,e){$.ajax({url:"/task/"+t,type:"DELETE",dataType:"json",success:function(d){a.DataTable().row(e).remove().draw()},error:function(d,l,o){console.error("AJAX error:",l,o)}})};$(document).on("click","#create-button",function(){$("#save-button").show(),$.callCreateModal()});$(document).on("click",".view-record",function(){$("#save-button").hide(),$.callModal($(this).data("id"),!0)});$(document).on("click",".edit-record",function(){$("#save-button").show(),$.callModal($(this).data("id"),!1)});$(document).on("click","#save-button",function(){var t=$("#task-modal-id");if(t.val().length===0){var a=$("#task-modal-name"),e=$("#task-modal-description");a.val().length===0||e.val().length===0?alert("Please enter a name and description for this task."):$.createRecord()}else $.editRecord()});$(document).on("click",".delete-record",function(){$.deleteRecord($(this).data("id"),$("#tasksTable"),$(this).closest("tr"))});
