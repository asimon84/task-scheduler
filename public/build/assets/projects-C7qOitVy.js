$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('input[name="_token"]').val()}});new DataTable("#projectsTable",{processing:!0,serverSide:!0,ajax:window.route,columns:[{data:"id",name:"id",searchable:!0},{data:"name",name:"name",searchable:!0},{data:"description",name:"description",className:"truncate-text",searchable:!0},{data:"actions",name:"actions",orderable:!1,searchable:!1}]});new bootstrap.Modal(document.getElementById("projectModal"));$.callCreateModal=function(){var o=$("#project-modal-id"),e=$("#project-modal-name"),a=$("#project-modal-description");e.prop("disabled",!1),a.prop("disabled",!1),o.val(""),e.val(""),a.val(""),$("#projectModal").modal("show")};$.callModal=function(o,e){var a=$("#project-modal-id"),t=$("#project-modal-name"),c=$("#project-modal-description");t.prop("disabled",e),c.prop("disabled",e),a.val(""),t.val(""),c.val(""),$.ajax({url:"/project/"+o,type:"GET",dataType:"json",success:function(r){a.val(r.id),t.val(r.name),c.val(r.description)},error:function(r,d,l){console.error("AJAX error:",d,l)}})};$.createRecord=function(){$.ajax({url:"/project/"+$("#project-modal-id").val(),type:"POST",dataType:"json",data:{name:$("#project-modal-name").val(),description:$("#project-modal-description").val()},success:function(o){$("#projectModal").modal("hide"),$("#projectsTable").DataTable().draw()},error:function(o,e,a){console.error("AJAX error:",e,a)}})};$.editRecord=function(){$.ajax({url:"/project/"+$("#project-modal-id").val(),type:"PUT",dataType:"json",data:{name:$("#project-modal-name").val(),description:$("#project-modal-description").val()},success:function(o){$("#projectModal").modal("hide"),$("#projectsTable").DataTable().draw()},error:function(o,e,a){console.error("AJAX error:",e,a)}})};$.deleteRecord=function(o,e,a){$.ajax({url:"/project/"+o,type:"DELETE",dataType:"json",success:function(t){e.DataTable().row(a).remove().draw()},error:function(t,c,r){console.error("AJAX error:",c,r)}})};$(document).on("click","#create-button",function(){$("#save-button").show(),$.callCreateModal()});$(document).on("click",".view-record",function(){window.location="/project/"+$(this).data("id")+"/schedule"});$(document).on("click",".edit-record",function(){$("#save-button").show(),$.callModal($(this).data("id"),!1)});$(document).on("click","#save-button",function(){var o=$("#project-modal-id");if(o.val().length===0){var e=$("#project-modal-name"),a=$("#project-modal-description");e.val().length===0||a.val().length===0?alert("Please enter a name and description for this project."):$.createRecord()}else $.editRecord()});$(document).on("click",".delete-record",function(){$.deleteRecord($(this).data("id"),$("#projectsTable"),$(this).closest("tr"))});
